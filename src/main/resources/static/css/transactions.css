/* ================= Base Theme & Tokens ================= */
:root{
  --font-sans:'Inter',system-ui,-apple-system,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif;
  --bg:#f5f7fa;--bg-alt:#eef2f6;--card:#ffffff;--card-elevated:#ffffffcc;--border:#e2e8f0;--border-strong:#cbd5e1;
  --accent:#2563eb;--accent-hover:#1d4ed8;--accent-soft:#eff6ff;
  --danger:#dc2626;--danger-soft:#fee2e2;--success:#059669;--success-soft:#d1fae5;--warning:#d97706;
  --text:#0f172a;--text-soft:#475569;--muted:#64748b;
  --radius-xs:4px;--radius-sm:6px;--radius-md:10px;--radius-lg:14px;
  --shadow-xs:0 1px 2px rgba(0,0,0,.04);--shadow-sm:0 1px 3px rgba(15,23,42,.08),0 1px 2px rgba(15,23,42,.05);--shadow-md:0 4px 6px -1px rgba(15,23,42,.08),0 2px 4px -2px rgba(15,23,42,.06);
  --focus-ring:0 0 0 3px rgba(37,99,235,.35);--transition:140ms cubic-bezier(.4,0,.2,1);
}
@media (prefers-color-scheme: dark){:root{--bg:#0f172a;--bg-alt:#1e293b;--card:#1e293b;--card-elevated:#1e293bcc;--border:#334155;--border-strong:#475569;--accent:#3b82f6;--accent-hover:#2563eb;--accent-soft:#1e3a8a;--text:#f1f5f9;--text-soft:#cbd5e1;--muted:#94a3b8;--shadow-sm:0 1px 3px rgba(0,0,0,.6),0 1px 2px rgba(0,0,0,.4);--shadow-md:0 4px 6px -1px rgba(0,0,0,.6),0 2px 4px -2px rgba(0,0,0,.5);--focus-ring:0 0 0 3px rgba(96,165,250,.45)}}
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:var(--font-sans);background:linear-gradient(135deg,var(--bg) 0%,var(--bg-alt) 100%);color:var(--text);-webkit-font-smoothing:antialiased;min-height:100vh}
body::before{content:"";position:fixed;inset:0;background:radial-gradient(circle at 20% 20%,rgba(37,99,235,.08),transparent 60%),radial-gradient(circle at 80% 70%,rgba(14,165,233,.10),transparent 65%);pointer-events:none}
.container{max-width:1180px;margin:32px auto;padding:0 24px 48px}
h1{font-size:clamp(1.6rem,2.2vw,2.4rem);font-weight:600;letter-spacing:-.5px;margin:0 0 28px;background:linear-gradient(90deg,var(--accent),#0ea5e9);-webkit-background-clip:text;background-clip:text;color:transparent}
.app-header{position:sticky;top:0;z-index:50;background:rgba(255,255,255,.9);backdrop-filter:saturate(180%) blur(10px);border-bottom:1px solid var(--border);box-shadow:0 2px 4px -2px rgba(0,0,0,.08)}
@media(prefers-color-scheme:dark){.app-header{background:rgba(30,41,59,.85)}}
.app-header .nav{max-width:1180px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;padding:10px 24px}
.brand{font-weight:600;font-size:1.05rem;letter-spacing:.5px;color:var(--accent)}
.menu{list-style:none;display:flex;gap:4px;margin:0;padding:0}
.menu a{display:inline-flex;align-items:center;padding:10px 14px;border-radius:10px;font-size:.78rem;font-weight:500;color:var(--text-soft);text-decoration:none;position:relative;transition:var(--transition)}
.menu a::before{content:"";position:absolute;inset:0;border-radius:inherit;background:linear-gradient(120deg,var(--accent-soft),transparent);opacity:0;transition:var(--transition)}
.menu a:hover{color:var(--text)}
.menu a:hover::before{opacity:1}
.menu a.active{color:var(--accent);background:var(--accent-soft);font-weight:600;box-shadow:0 1px 2px rgba(0,0,0,.06) inset}
.menu a.active::after{content:"";position:absolute;left:14px;right:14px;bottom:4px;height:3px;border-radius:2px;background:linear-gradient(90deg,var(--accent),#0ea5e9)}
.card{background:var(--card);padding:24px 22px 26px;border-radius:var(--radius-lg);box-shadow:var(--shadow-md);backdrop-filter:saturate(180%) blur(8px);border:1px solid var(--border);position:relative;overflow:hidden}
.card::before{content:"";position:absolute;inset:0;pointer-events:none;background:linear-gradient(120deg,rgba(255,255,255,.0) 40%,rgba(255,255,255,.35) 130%);mix-blend-mode:overlay;opacity:.6}
/* Mini KPI cards */
.mini-card{flex:1 1 160px;min-width:160px;background:var(--card);border:1px solid var(--border);border-radius:var(--radius-md);padding:14px 16px;box-shadow:var(--shadow-sm);display:flex;flex-direction:column;gap:6px;position:relative;overflow:hidden}
.mini-card h3{font-size:.70rem;text-transform:uppercase;letter-spacing:.8px;margin:0;color:var(--muted)}
.mini-card .value{font-size:1.2rem;font-weight:600;letter-spacing:.5px;margin:0}
.mini-card[data-type="income"] .value{color:var(--success)}
.mini-card[data-type="expense"] .value{color:var(--danger)}
.mini-card[data-type="net"] .value{color:var(--text)}
.mini-card::after{content:"";position:absolute;inset:0;background:linear-gradient(130deg,rgba(255,255,255,.0) 35%,rgba(255,255,255,.4) 130%);opacity:.35;pointer-events:none}

/* Dashboard specific layout helpers */
.dash-grid{display:grid;gap:24px}
@media(min-width:900px){.dash-grid{grid-template-columns:1.2fr .8fr}}
.dash-toolbar{margin-left:auto;display:flex;align-items:flex-end;gap:10px}
.dash-toolbar label{font-size:.75rem;font-weight:600;color:var(--text-soft)}
.dash-toolbar input[type="month"]{padding:8px 10px;border:1px solid var(--border);border-radius:8px;background:var(--card);color:var(--text)}

/* Table header style for dashboard */
#categoryTable thead th{font-weight:600;font-size:.72rem;letter-spacing:.6px;color:var(--muted);text-transform:uppercase}
#categoryTable tbody tr{background:var(--card);box-shadow:var(--shadow-xs)}
#categoryTable tbody td{padding:10px 12px;border:1px solid var(--border)}
form{display:flex;flex-direction:column;gap:14px}
form .field-row{display:flex;flex-direction:column;gap:6px}
fieldset{border:1px solid var(--border);padding:12px 14px 16px;border-radius:var(--radius-md);display:flex;gap:18px;flex-wrap:wrap;background:var(--accent-soft)}
legend{padding:0 6px;font-size:12px;text-transform:uppercase;letter-spacing:.5px;font-weight:600;color:var(--accent)}
label{font-size:.82rem;font-weight:500;color:var(--text-soft);display:flex;gap:6px;align-items:center}
input[type="text"],input[type="number"],input[type="date"],select,#newCategory{padding:10px 12px;border:1px solid var(--border);border-radius:var(--radius-sm);background:var(--card);font:inherit;color:var(--text);box-shadow:var(--shadow-xs);transition:var(--transition);line-height:1.25}
input:focus,select:focus{outline:none;box-shadow:var(--focus-ring);border-color:var(--accent)}
input::placeholder{color:var(--muted)}
.category-row{display:flex;gap:8px;align-items:center}
.actions{display:flex;gap:10px;margin-top:6px}
button{background:var(--accent);color:#fff;border:1px solid var(--accent);padding:11px 18px;font-size:.87rem;font-weight:600;border-radius:var(--radius-sm);cursor:pointer;letter-spacing:.3px;line-height:1;display:inline-flex;align-items:center;gap:6px;box-shadow:0 1px 2px rgba(0,0,0,.08);transition:var(--transition);position:relative;overflow:hidden}
button::after{content:"";position:absolute;inset:0;background:linear-gradient(120deg,rgba(255,255,255,.0) 35%,rgba(255,255,255,.45) 130%);opacity:0;transition:var(--transition)}
button:hover{background:var(--accent-hover);box-shadow:0 4px 10px -2px rgba(37,99,235,.35)}
button:hover::after{opacity:.4}
button:active{transform:translateY(1px)}
button.secondary{background:var(--bg-alt);color:var(--text-soft);border-color:var(--border)}
button.secondary:hover{background:#e2e8f0;color:var(--text)}
button:disabled{background:var(--border);color:var(--muted);cursor:not-allowed;box-shadow:none}
table{width:100%;border-collapse:separate;border-spacing:0 6px;font-size:.83rem}
thead th{font-weight:600;font-size:.70rem;letter-spacing:.7px;text-transform:uppercase;color:var(--muted);padding:0 12px 4px;text-align:left}
tbody tr{background:var(--card);box-shadow:var(--shadow-sm);transition:var(--transition)}
tbody tr:hover{transform:translateY(-3px);box-shadow:0 6px 14px -4px rgba(15,23,42,.18)}
tbody td{padding:10px 12px;border-top:1px solid var(--border);border-bottom:1px solid var(--border)}
tbody tr td:first-child{border-left:1px solid var(--border);border-top-left-radius:var(--radius-sm);border-bottom-left-radius:var(--radius-sm)}
tbody tr td:last-child{border-right:1px solid var(--border);border-top-right-radius:var(--radius-sm);border-bottom-right-radius:var(--radius-sm)}
tbody tr td.amount{font-variant-numeric:tabular-nums;font-weight:600}
tbody tr.expense td.amount{color:var(--danger)}
tbody tr.income td.amount{color:var(--success)}

/* Action icons */
.actions-col{white-space:nowrap}
.icon-btn{appearance:none;background:transparent;border:1px solid var(--border);color:var(--text-soft);padding:8px;border-radius:8px;cursor:pointer;transition:var(--transition);margin-right:6px;display:inline-flex;align-items:center;justify-content:center}
.icon-btn:hover{background:var(--bg-alt);color:var(--text)}
.icon-btn.edit{border-color:rgba(37,99,235,.35);color:var(--accent)}
.icon-btn.edit:hover{background:var(--accent-soft)}
.icon-btn.delete{border-color:rgba(220,38,38,.35);color:var(--danger)}
.icon-btn.delete:hover{background:var(--danger-soft)}
.empty-state{margin-top:28px;padding:34px 24px;border:1px dashed var(--border);border-radius:var(--radius-md);text-align:center;color:var(--muted);background:linear-gradient(145deg,var(--card) 0%,var(--card-elevated) 100%);backdrop-filter:blur(3px)}
.empty-illustration{font-size:44px;line-height:1;margin-bottom:12px;filter:saturate(120%)}
.alert {padding:14px 16px;margin-bottom:18px;border-radius:var(--radius-sm);font-size:.82rem;font-weight:500;display:flex;gap:10px;align-items:center}
.alert-success {background-color:var(--success-soft);color:var(--success)}
.alert-error {background-color:var(--danger-soft);color:var(--danger)}
.loading {display:inline-block;width:16px;height:16px;border:2px solid var(--accent);border-radius:50%;border-top-color:transparent;animation:spin 1s linear infinite}
@keyframes spin {to {transform: rotate(360deg);}}
@media(min-width:760px){form .field-row{flex-direction:row;align-items:center}form .field-row>label{width:140px;justify-content:flex-start}}
.content {display:flex;flex-direction:column;gap:28px}
.form-section{flex:1;min-width:280px}
.list-section{flex:2}
@media(min-width:1000px){.content{flex-direction:row;align-items:flex-start}}
.list-section table {width:100%}
*{scrollbar-width:thin;scrollbar-color:var(--accent) var(--bg-alt)}
*::-webkit-scrollbar{width:10px;height:10px}
*::-webkit-scrollbar-track{background:var(--bg-alt)}
*::-webkit-scrollbar-thumb{background:linear-gradient(var(--accent),#0ea5e9);border-radius:20px}
*::-webkit-scrollbar-thumb:hover{background:linear-gradient(var(--accent-hover),#0284c7)}
